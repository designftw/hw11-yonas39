<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Let's Chat</title>
    <link rel="stylesheet" href="style_1.css" />
    <link rel="stylesheet" href="style_2.css" />

    <script type="module" src="chat_1.js"></script>

    <!-- ########## Translate ###################### -->

    <!-- <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script> -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  </head>
  <body>
    <!-- ############### Title #################################-->
    <!-- ############### Title #################################-->
    <h1>Let's Chat</h1>

    <!-- ############### App #################################-->
    <!-- ############### App #################################-->
    <div id="app" class="theme">
      <!-- ################### Translate ####################### -->

      <!-- ############### Login and LogOut #################################-->
      <!-- ############### Login and LogOut #################################-->
      <p>
        <button class="login-logout" @click="$gf.toggleLogIn">
          <!-- If we have a user ID, we're logged in so show "Log Out" -->
          <!-- Otherwise, show "Log In" -->
          {{ $gf.me? 'Log Out' : 'Log In' }}
        </button>
      </p>

      <!-- ########################### Setting ########################### -->
      <div class="settings-container">
        <button class="settings-button" @click="toggleSettingsModal">
          Settings
        </button>
      </div>

      <transition name="slide-fade">
        <div class="settings-modal" v-if="showSettingsModal">
          <h2>Settings</h2>
          <ul>
            <li>
              <label for="targetLanguage">Translate to : </label>

              <select id="targetLanguage" v-model="targetLanguage">
                <option value="">None--()</option>
                <option value="af">Afrikaans - (af)</option>
                <option value="sq">Albanian - (sq)</option>
                <option value="am">Amharic - (am)</option>
                <option value="ar">Arabic - (ar)</option>
                <option value="hy">Armenian - (hy)</option>
                <option value="az">Azerbaijani - (az)</option>
                <option value="eu">Basque - (eu)</option>
                <option value="be">Belarusian - (be)</option>
                <option value="bn">Bengali - (bn)</option>
                <option value="bs">Bosnian - (bs)</option>
                <option value="bg">Bulgarian - (bg)</option>
                <option value="ca">Catalan - (ca)</option>
                <option value="ceb">Cebuano - (ceb)</option>
                <option value="ny">Chichewa - (ny)</option>
                <option value="zh-CN">Chinese (Simplified) - (zh-CN)</option>
                <option value="zh-TW">Chinese (Traditional) - (zh-TW)</option>
                <option value="co">Corsican - (co)</option>
                <option value="hr">Croatian - (hr)</option>
                <option value="cs">Czech - (cs)</option>
                <option value="da">Danish - (da)</option>
                <option value="nl">Dutch - (nl)</option>
                <option value="en">English - (en)</option>
                <option value="eo">Esperanto - (eo)</option>
                <option value="et">Estonian - (et)</option>
                <option value="tl">Filipino - (tl)</option>
                <option value="fi">Finnish - (fi)</option>
                <option value="fr">French - (fr)</option>
                <option value="fy">Frisian - (fy)</option>
                <option value="gl">Galician - (gl)</option>
                <option value="ka">Georgian - (ka)</option>
                <option value="de">German - (de)</option>
                <option value="el">Greek - (el)</option>
                <option value="gu">Gujarati - (gu)</option>
                <option value="ht">Haitian Creole - (ht)</option>
                <option value="ha">Hausa - (ha)</option>
                <option value="haw">Hawaiian - (haw)</option>
                <option value="he">Hebrew - (he)</option>
                <option value="hi">Hindi - (hi)</option>
                <option value="hmn">Hmong - (hmn)</option>
                <option value="hu">Hungarian - (hu)</option>
                <option value="is">Icelandic - (is)</option>
                <option value="ig">Igbo - (ig)</option>
                <option value="id">Indonesian - (id)</option>
                <option value="ga">Irish - (ga)</option>
                <option value="it">Italian - (it)</option>
                <option value="ja">Japanese - (ja)</option>
                <option value="jw">Javanese - (jw)</option>
                <option value="kn">Kannada - (kn)</option>
                <option value="kk">Kazakh - (kk)</option>
                <option value="km">Khmer - (km)</option>
                <option value="rw">Kinyarwanda - (rw)</option>
                <option value="ko">Korean - (ko)</option>
                <option value="ku">Kurdish (Kurmanji) - (ku)</option>
                <option value="ky">Kyrgyz - (ky)</option>
                <option value="lo">Lao - (lo)</option>
                <option value="la">Latin - (la)</option>
                <option value="lv">Latvian - (lv)</option>
                <option value="lt">Lithuanian - (lt)</option>
                <option value="lb">Luxembourgish - (lb)</option>
                <option value="mk">Macedonian - (mk)</option>
                <option value="mg">Malagasy - (mg)</option>
                <option value="ms">Malay - (ms)</option>
                <option value="ml">Malayalam - (ml)</option>
                <option value="mt">Maltese - (mt)</option>
                <option value="mi">Maori - (mi)</option>
                <option value="mr">Marathi - (mr)</option>
                <option value="mn">Mongolian - (mn)</option>
                <option value="my">Myanmar (Burmese) - (my)</option>
                <option value="ne">Nepali - (ne)</option>
                <option value="no">Norwegian - (no)</option>
                <option value="or">Odia (Oriya) - (or)</option>
                <option value="ps">Pashto - (ps)</option>
                <option value="fa">Persian - (fa)</option>
                <option value="pl">Polish - (pl)</option>
                <option value="pt">Portuguese - (pt)</option>
                <option value="pa">Punjabi - (pa)</option>
                <option value="ro">Romanian - (ro)</option>
                <option value="ru">Russian - (ru)</option>
                <option value="sm">Samoan - (sm)</option>
                <option value="gd">Scots Gaelic - (gd)</option>
                <option value="sr">Serbian - (sr)</option>
                <option value="st">Sesotho - (st)</option>
                <option value="sn">Shona - (sn)</option>
                <option value="sd">Sindhi - (sd)</option>
                <option value="si">Sinhala - (si)</option>
                <option value="sk">Slovak - (sk)</option>
                <option value="sl">Slovenian - (sl)</option>
                <option value="so">Somali - (so)</option>
                <option value="es">Spanish - (es)</option>
                <option value="su">Sundanese - (su)</option>
                <option value="sw">Swahili - (sw)</option>
                <option value="sv">Swedish - (sv)</option>
                <option value="tg">Tajik - (tg)</option>
                <option value="ta">Tamil - (ta)</option>
                <option value="tt">Tatar - (tt)</option>
                <option value="te">Telugu - (te)</option>
                <option value="th">Thai - (th)</option>
                <option value="tr">Turkish - (tr)</option>
                <option value="tk">Turkmen - (tk)</option>
                <option value="uk">Ukrainian - (uk)</option>
                <option value="ur">Urdu - (ur)</option>
                <option value="ug">Uyghur - (ug)</option>
                <option value="uz">Uzbek - (uz)</option>
                <option value="vi">Vietnamese - (vi)</option>
                <option value="cy">Welsh - (cy)</option>
                <option value="xh">Xhosa - (xh)</option>
                <option value="yi">Yiddish - (yi)</option>
                <option value="yo">Yoruba - (yo)</option>
                <option value="zu">Zulu - (zu)</option>
              </select>
            </li>
            <li>
              <label for="exceptLanguages">Preserve original for:</label>
              <select id="exceptLanguage" v-model="selectedLanguages" multiple>
                <option value="">None--()</option>
                <option value="af">Afrikaans - (af)</option>
                <option value="sq">Albanian - (sq)</option>
                <option value="am">Amharic - (am)</option>
                <option value="ar">Arabic - (ar)</option>
                <option value="hy">Armenian - (hy)</option>
                <option value="az">Azerbaijani - (az)</option>
                <option value="eu">Basque - (eu)</option>
                <option value="be">Belarusian - (be)</option>
                <option value="bn">Bengali - (bn)</option>
                <option value="bs">Bosnian - (bs)</option>
                <option value="bg">Bulgarian - (bg)</option>
                <option value="ca">Catalan - (ca)</option>
                <option value="ceb">Cebuano - (ceb)</option>
                <option value="ny">Chichewa - (ny)</option>
                <option value="zh-CN">Chinese (Simplified) - (zh-CN)</option>
                <option value="zh-TW">Chinese (Traditional) - (zh-TW)</option>
                <option value="co">Corsican - (co)</option>
                <option value="hr">Croatian - (hr)</option>
                <option value="cs">Czech - (cs)</option>
                <option value="da">Danish - (da)</option>
                <option value="nl">Dutch - (nl)</option>
                <option value="en">English - (en)</option>
                <option value="eo">Esperanto - (eo)</option>
                <option value="et">Estonian - (et)</option>
                <option value="tl">Filipino - (tl)</option>
                <option value="fi">Finnish - (fi)</option>
                <option value="fr">French - (fr)</option>
                <option value="fy">Frisian - (fy)</option>
                <option value="gl">Galician - (gl)</option>
                <option value="ka">Georgian - (ka)</option>
                <option value="de">German - (de)</option>
                <option value="el">Greek - (el)</option>
                <option value="gu">Gujarati - (gu)</option>
                <option value="ht">Haitian Creole - (ht)</option>
                <option value="ha">Hausa - (ha)</option>
                <option value="haw">Hawaiian - (haw)</option>
                <option value="he">Hebrew - (he)</option>
                <option value="hi">Hindi - (hi)</option>
                <option value="hmn">Hmong - (hmn)</option>
                <option value="hu">Hungarian - (hu)</option>
                <option value="is">Icelandic - (is)</option>
                <option value="ig">Igbo - (ig)</option>
                <option value="id">Indonesian - (id)</option>
                <option value="ga">Irish - (ga)</option>
                <option value="it">Italian - (it)</option>
                <option value="ja">Japanese - (ja)</option>
                <option value="jw">Javanese - (jw)</option>
                <option value="kn">Kannada - (kn)</option>
                <option value="kk">Kazakh - (kk)</option>
                <option value="km">Khmer - (km)</option>
                <option value="rw">Kinyarwanda - (rw)</option>
                <option value="ko">Korean - (ko)</option>
                <option value="ku">Kurdish (Kurmanji) - (ku)</option>
                <option value="ky">Kyrgyz - (ky)</option>
                <option value="lo">Lao - (lo)</option>
                <option value="la">Latin - (la)</option>
                <option value="lv">Latvian - (lv)</option>
                <option value="lt">Lithuanian - (lt)</option>
                <option value="lb">Luxembourgish - (lb)</option>
                <option value="mk">Macedonian - (mk)</option>
                <option value="mg">Malagasy - (mg)</option>
                <option value="ms">Malay - (ms)</option>
                <option value="ml">Malayalam - (ml)</option>
                <option value="mt">Maltese - (mt)</option>
                <option value="mi">Maori - (mi)</option>
                <option value="mr">Marathi - (mr)</option>
                <option value="mn">Mongolian - (mn)</option>
                <option value="my">Myanmar (Burmese) - (my)</option>
                <option value="ne">Nepali - (ne)</option>
                <option value="no">Norwegian - (no)</option>
                <option value="or">Odia (Oriya) - (or)</option>
                <option value="ps">Pashto - (ps)</option>
                <option value="fa">Persian - (fa)</option>
                <option value="pl">Polish - (pl)</option>
                <option value="pt">Portuguese - (pt)</option>
                <option value="pa">Punjabi - (pa)</option>
                <option value="ro">Romanian - (ro)</option>
                <option value="ru">Russian - (ru)</option>
                <option value="sm">Samoan - (sm)</option>
                <option value="gd">Scots Gaelic - (gd)</option>
                <option value="sr">Serbian - (sr)</option>
                <option value="st">Sesotho - (st)</option>
                <option value="sn">Shona - (sn)</option>
                <option value="sd">Sindhi - (sd)</option>
                <option value="si">Sinhala - (si)</option>
                <option value="sk">Slovak - (sk)</option>
                <option value="sl">Slovenian - (sl)</option>
                <option value="so">Somali - (so)</option>
                <option value="es">Spanish - (es)</option>
                <option value="su">Sundanese - (su)</option>
                <option value="sw">Swahili - (sw)</option>
                <option value="sv">Swedish - (sv)</option>
                <option value="tg">Tajik - (tg)</option>
                <option value="ta">Tamil - (ta)</option>
                <option value="tt">Tatar - (tt)</option>
                <option value="te">Telugu - (te)</option>
                <option value="th">Thai - (th)</option>
                <option value="tr">Turkish - (tr)</option>
                <option value="tk">Turkmen - (tk)</option>
                <option value="uk">Ukrainian - (uk)</option>
                <option value="ur">Urdu - (ur)</option>
                <option value="ug">Uyghur - (ug)</option>
                <option value="uz">Uzbek - (uz)</option>
                <option value="vi">Vietnamese - (vi)</option>
                <option value="cy">Welsh - (cy)</option>
                <option value="xh">Xhosa - (xh)</option>
                <option value="yi">Yiddish - (yi)</option>
                <option value="yo">Yoruba - (yo)</option>
                <option value="zu">Zulu - (zu)</option>
              </select>

              <div
                class="delete-remove"
                v-for="(language, index) in selectedLanguages"
                :key="index"
              >
                {{ language }}
                <button @click="removeLanguage(index)">X</button>
              </div>
              <div class="delete-remove">
                <button @click="removeAllSelectedLanguages">
                  Remove All 🗑️
                </button>
              </div>
            </li>
          </ul>

          <!-- ############### Help  #################################-->
          <!-- ############### Help #################################-->
          <div class="help-button-container">
            <button @click="toggleHelpModal" class="help-button">Help</button>
          </div>

          <transition name="slide-fade">
            <div class="help-modal" v-if="showHelpModal">
              <div class="container">
                <h1>Let's Chat Help Manual</h1>

                <div class="section">
                  <h2>Introduction</h2>
                  <p>
                    This guide is designed to help you navigate and utilize the
                    functionalities of the chat interface.
                  </p>
                </div>
                <div class="section">
                  <h2>User Interface</h2>
                  <p>
                    When you enter the chat, you will see a list of messages in
                    the main chat area. Each message will be in a bubble with
                    the sender's name and the timestamp of the message. Messages
                    can contain text, images, and various options for
                    interaction such as liking, reading.
                  </p>
                </div>
                <div class="section">
                  <h2>Profile Picture</h2>
                  <p>
                    At the top of the chat interface, you'll see your profile
                    picture. To change it, click on the "Change Profile Pic"
                    button. A file dialog will appear, allowing you to select a
                    new profile picture from your device. Choose an image file
                    and confirm your choice.
                  </p>
                </div>
                <div class="section">
                  <h2>Message Attachments</h2>
                  <p>
                    You can also share images in the chat. Below the text input
                    box, click on the "Choose File" button. A file dialog will
                    appear, allowing you to select an image from your device.
                    After selecting the image, type any accompanying message in
                    the text box and click "Send". The image will be sent along
                    with your message.
                  </p>
                </div>
                <div class="section">
                  <h2>Sending Private Messages</h2>
                  <p>
                    To send a private message, start by toggling the "Chat Mode:
                    Public" to "Chat Mode: Private". Once in private mode, you
                    will notice a "Search by Username" field in the input box.
                    Double-check your spelling and ensure that you are typing
                    the username of the person you wish to message, rather than
                    their profile name. If you encounter an error message,
                    double-check your spelling and make sure you are accurately
                    entering the username. It's important to note that the
                    person you are trying to reach may not be signed up on the
                    Let's Chat app. In such cases, the messaging feature may not
                    be available for that particular user. Once you have
                    confirmed the correct username and verified that the person
                    is signed up on the Let's Chat app, you can compose and send
                    your messages directly to them.
                  </p>
                </div>
                <div class="section">
                  <h2>Message Translation</h2>
                  <p>
                    If a message is written in a language different from your
                    own, the chat app provides a translation feature. You can
                    access this feature by clicking on the settings, where you
                    can select the language to which you want the message
                    translated. Additionally, you have the option to preserve
                    the original text (untranslated) for the languages you
                    understand by selecting the corresponding language(s) from
                    the "Preserve original for" options. If you wish to select
                    multiple languages, you can use the command+click on Mac or
                    control+click on Windows. The translated text will be
                    displayed in place of the original message, along with the
                    code name of the detected language. This translation feature
                    greatly assists in understanding messages in different
                    languages and ensures smooth communication.
                  </p>
                </div>
                <!-- <div class="section">
                  <h2>Reply to a Message</h2>
                  <p>
                    When you want to reply to a specific message in the chat,
                    click on the "Reply" button next to the message you wish to
                    respond to. A reply form will appear with the text "Replying
                    to: [previous message]". Type your reply in the text box and
                    click "Send".
                  </p>
                </div> -->
                <div class="section">
                  <h2>Edit Your Name</h2>
                  <p>
                    If you want to change your name in the chat, click on the
                    "Edit Name" button. An input field will appear with a "Save
                    Name" button. Type your new name and click "Save Name".
                  </p>
                </div>
                <div class="section">
                  <h2>Read Receipts</h2>
                  <p>
                    When you send a message, a double check (✓✓) symbol will
                    appear to indicate that the message has been read. This
                    symbol also appears on messages from other users that you
                    have read.
                  </p>
                </div>
                <div class="section">
                  <h2>Like a Message</h2>
                  <p>
                    You can express your approval or enjoyment of a message by
                    clicking the "Like" button. If you have already liked a
                    message, the button will display "Unlike". Click it again to
                    remove your like.
                  </p>
                </div>
                <div class="section">
                  <h2>TroubleShooting</h2>
                  <p>
                    If you're trying to download an image and it says "Image is
                    downloading...", please wait for a while as the image is
                    being downloaded. If it says "Image could not be
                    downloaded!", please try again. If you're trying to send a
                    message and it's not being sent, please check your internet
                    connection and try again. If you're trying to edit your
                    profile and it's not being updated, please check your
                    internet connection and try again.
                  </p>
                </div>

                <button @click="toggleHelpModal" class="close-help-button">
                  Close Help
                </button>
              </div>
            </div>
          </transition>

          <!-- ######## close for the setting ############### -->

          <button class="close-settings-button" @click="toggleSettingsModal">
            Close
          </button>
        </div>
      </transition>

      <!-- ############### Logged in Properties #################################-->
      <!-- ############### Logged in Properties #################################-->
      <!-- If we're not logged in, hide everything except the login button -->

      <template v-if="$gf.me">
        <!-- ############### Chat format PUBLIC / PRIVATE ##############################-->
        <!-- ############### Chat format PUBLIC / PRIVATE ##############################-->
        <!-- ############### Chat format PUBLIC / PRIVATE ##############################-->
        <p class="private-public">
          <label class="switch">
            <input id="toggle" type="checkbox" v-model="privateMessaging" />
            <span class="slider round"></span>
          </label>
          <span class="toggle-label">
            Chat Mode: {{ privateMessaging ? 'Private' : 'Public' }}</span
          >
        </p>

        <!-- ############### Display Name and Profile picture #################################-->
        <!-- ############### Display Name and Profile picture #################################-->
        <div>
          <profile-picture
            class="profile-name"
            :actor="$gf.me"
            :editable="true"
          ></profile-picture>
        </div>
        <div class="profile-name">
          <!-- <p> -->
          <!-- We display names in multiple places, so we made a -->
          <!-- reusable <name></name> component. -->
          <!-- See below for the template. -->
          <!-- <name :actor="$gf.me" :editable="true"></name>
          </p> -->
          Welcome : {{myUsername}}
        </div>
        <!-- ############### request-username" ##############################-->
        <!-- ############### request-username" ##############################-->
        <!-- ############### request-username" ##############################-->
        <div class="request-username">
          <form @submit.prevent="setUsername">
            <input
              v-model="preferredUsername"
              placeholder="Choose a username..."
            />
            <input type="submit" value="Change Username" />
            <span v-if="emptyUsername" class="error-message">
              {{emptyUsername}}</span
            >
          </form>
          {{ usernameResult }}
        </div>

        <!-- $$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$ -->
        <!-- $$$$$$$$$$$$$$$ Change the channel $$$$$$$$$$$$$$$$$$$$$ -->
        <!-- $$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$ -->
        <!-- $$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$ -->

        <p v-if="!privateMessaging">
          <label for="channel"> Change the channel you're chatting in: </label>
          <input id="channel" v-model="channel" />
        </p>

        <!-- ############### Search by username  ##############################-->
        <!-- ############### Search by username  ##############################-->
        <p v-else>
          <label for="username">Search by Username:</label>
          <input id="username" v-model="searchedUsername" />
          <button @click="searchByUsername">🔍Search</button>

          <span v-if="recipient" class="reciepient-name">
            <!-- Profile Picture:
            <profile-picture :actor="message.actor"></profile-picture> -->

            Chatting with: <span id="chat-span">{{ recipientUsername }}</span>
          </span>

          <span class="search-status" v-if="searchError"
            >{{ searchError }}</span
          >
          <span v-if="searchLoading">Loading...</span>
        </p>

        <!-- ############### messages-container ##############################-->
        <!-- ############### messages-container ##############################-->
        <div class="wrapper">
          <ul class="messages-container">
            <!-- List all the messages -->
            <li
              v-for="message of messages"
              :key="message.id"
              class="v-enter v-enter-active"
            >
              <!-- Display and edit form if we're editing a message -->
              <form
                v-if="editID==message.id"
                @submit.prevent="saveEditMessage(message)"
              >
                <input class="edit" v-model="editText" />
                <input class="edit-save" type="submit" value="Save" />
              </form>
              <!-- Otherwise, display a bunch of properties from the message -->
              <ul
                class="message-info"
                :class="{'incoming':message.actor!==$gf.me, 'outgoing':message.actor===$gf.me}"
                v-else
              >
                <div class="message-header">
                  <li v-if="!privateMessaging">
                    @
                    <strong> <name :actor="message.actor"></name></strong>
                  </li>
                </div>

                <p id="text-message">
                  Message:
                  <span v-if="translatedMessages[message.id]">
                    {{ translatedMessages[message.id].translatedText }}
                  </span>
                  <span v-else> {{ message.content }} </span>
                </p>

                <div>
                  <span class="detected-lang">
                    Language 🌐: {{
                    translatedMessages[message.id].detectedLanguage }}</span
                  >
                </div>

                <!-- #####################  HIDE THE DETAILS ####################### -->
                <!-- #####################  HIDE THE DETAILS ####################### -->
                <!-- #####################  HIDE THE DETAILS ####################### -->

                <li
                  v-if="message.attachment && message.attachment.magnet in downloadedImages"
                >
                  <span
                    v-if="downloadedImages[message.attachment.magnet]=='downloading'"
                  >
                    Image is downloading...
                  </span>
                  <span
                    v-else-if="downloadedImages[message.attachment.magnet]=='error'"
                  >
                    Image could not be downloaded!
                  </span>
                  <img
                    style="width: 100%"
                    v-else
                    :src="downloadedImages[message.attachment.magnet]"
                  />
                </li>

                <!-- ############### Delete and Edit ##############################-->
                <!-- ############### Delete and Edit  ##############################-->
                <!-- Only add these controls if the message is ours -->
                <!-- You can't edit or delete other people's messages -->
                <div class="foot-container">
                  <div class="actions-container">
                    <template v-if="message.actor==$gf.me">
                      <li>
                        <button @click="confirmDelete(message)">
                          Delete 🗑️
                        </button>
                      </li>
                      <li>
                        <button @click="startEditMessage(message)">
                          Edit ✍🏾
                        </button>
                      </li>
                    </template>
                    <li>
                      <like :messageid="message.id"></like>
                    </li>

                    <li>
                      <read
                        :messageid="message.id"
                        :sender="message.sender"
                      ></read>
                    </li>

                    <!-- <li>
                      <reply
                        :messageid="message.id"
                        :content="message.content"
                        :sender="message.sender"
                      ></reply>
                    </li> -->
                  </div>
                  <div class="message-timestamp">
                    <span>{{ formatDate(message.published) }}</span>
                  </div>
                </div>
              </ul>
            </li>
          </ul>

          <!-- ############### Send message ##############################-->
          <!-- ############### Send message ##############################-->
          <div class="message-send-button">
            <!-- ############### Error when sending message ##############################-->
            <!-- ############### Error when sending message ##############################-->
            <div class="error-message" v-if="errorMessage">
              {{ errorMessage }}
            </div>

            <!-- A form for sending messages -->
            <form @submit.prevent="sendMessage" class="send-input">
              <input
                class="submit-text-box"
                v-model="messageText"
                placeholder="Type a message..."
              />
              <!-- ############## Sending Media in Chat ############-->
              <!-- <span>📸</span> -->
              <input type="file" accept="image/*" @change="onImageAttachment" />
              <input class="submit-button" type="submit" value="Send" />
            </form>
          </div>
        </div>
        <!-- ############### Message-content End here ##############################-->
        <!-- ############### Message-content End here ##############################-->
      </template>
    </div>

    <template id="name">
      <span v-if="!editing">
        <!-- If we're not editing the name-->
        <!-- Display the profile's name, if it exists -->
        <!-- or anonymous if it doesn't -->
        {{ profile? profile.name : 'Anonymous' }}

        <!-- Also if the name is "editable" add an edit button -->
        <button v-if="editable" @click="editName">Edit Name ✍🏾</button>
      </span>

      <!-- If we're in the editing state, create something to edit the name-->
      <form v-else @submit.prevent="saveName">
        <input v-model="editText" />
        <input type="submit" value="Save Name" />
      </form>
    </template>

    <!-- ############# LIKE Template ################# -->
    <template id="like">
      <button @click="toggleLike">
        {{ myLikes.length? 'Unlike 👎🏾' : 'Like 👍🏾' }}
      </button>
      ({{ numLikes }})
    </template>

    <!-- ############# READ Template ################# -->
    <template id="read">
      <div>
        <span class="read-indicator" v-if="sender === $gf.me && myReads.length"
          >✓✓</span
        >
      </div>
      <div class="read-indicator" v-if="sender !== $gf.me">
        read ✓✓ ({{ numReads }})
      </div>
    </template>

    <!-- ############# REPLY Template ################# -->

    <!-- <template id="reply">
      <div class="reply-container">
        <button @click="showReplyForm = !showReplyForm">Reply ⏎</button>
        <div v-if="showReplyForm" class="reply-form">
          <div class="quoted-message">
            <span>Replying to ⏎:</span>
            <span
              >{{ replyingToReply ? replyingToReply.content :
              repliedMessageSnippet }}</span
            >
          </div>
          <input
            type="text"
            v-model="replyContent"
            placeholder="Write a reply..."
          />
          <button @click="sendReply">Send</button>
        </div>
        <div class="replies">
          <div
            v-for="reply in replies"
            class="reply-message"
            :class="{ 'sender-reply': reply.actor === $gf.me }"
          >
            <div class="quoted-message">
              <span>Replying to ⏎:</span>
              <span>{{ repliedMessageSnippet }}</span>
            </div>
            <span v-if="editingReply === reply">
              <input v-model="editText" />
              <button @click="saveEditReply">Save</button>
            </span>
            <span v-else>
              {{ reply.content }}
              <template v-if="reply.actor === $gf.me">
                <button @click="confirmDelete(reply)">Delete 🗑️</button>
                <button @click="startEditReply(reply)">Edit ✍🏾</button>
              </template>
              <button @click="startReplyToReply(reply)">Reply ⏎</button>
            </span>

            <div
              v-if="showReplyForm && replyingToReply === reply"
              class="reply-form"
            >
              <div class="quoted-message">
                <span>Replying to ⏎:</span>
                <span>{{ replyingToReply.content }}</span>
              </div>
              <input
                type="text"
                v-model="replyContent"
                placeholder="Write a reply..."
              />
              <button @click="sendReply">Send</button>
            </div>

            <div
              v-for="subReply in replyReplies(reply.id)"
              :key="subReply.id"
              class="sub-reply"
            >
              <div
                class="reply-message"
                :class="{ 'sender-reply': subReply.actor === $gf.me }"
              >
                <span v-if="editingReply === subReply">
                  <input v-model="editText" />
                  <button @click="saveEditReply">Save</button>
                </span>
                <span v-else>
                  {{ subReply.content }}
                  <template v-if="subReply.actor === $gf.me">
                    <button @click="confirmDelete(subReply)">Delete 🗑️</button>
                    <button @click="startEditReply(subReply)">Edit ✍🏾</button>
                  </template>
                  <button @click="startReplyToReply(subReply)">Reply ⏎</button>
                </span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </template> -->

    <!--############### Profile picture #################### -->

    <script type="text/x-template" id="profile-picture">
      <div>
        <img class="profile-image" v-if="localImageUrl" :src="localImageUrl" />
        <button v-if="editable" @click="editProfilePicture">
          Change Profile Pic
        </button>
      </div>
    </script>
  </body>
</html>
